<section>
  <div class="container-fluid notificaciones-container">
    <div class="row">
      <div class="col-12">
        <div class="turno-card">
          <h2 class="titulo">
            <i class="bi bi-bell-fill me-2"></i>
            <span>PQRS</span>
          </h2>
          <div class="filtros" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;align-items:center;">
            <div class="input-icon" style="flex:1 1 220px;min-width:200px;">
              <i class="bi bi-search" aria-hidden="true"></i>
              <input type="search" [(ngModel)]="q" placeholder="Buscar (nombre/correo/comentario)" class="form-control" aria-label="Buscar">
            </div>
            <input type="date" [(ngModel)]="from" class="form-control" aria-label="Desde" placeholder="Desde (fecha)" title="Desde (fecha)">
            <input type="date" [(ngModel)]="to" class="form-control" aria-label="Hasta" placeholder="Hasta (fecha)" title="Hasta (fecha)">
          </div>
          <div *ngIf="cargando">Cargando...</div>
          <div *ngIf="!cargando && (!view || view.length === 0)">
            <p>No hay notificaciones por ahora.</p>
          </div>
          <ul class="turno-lista" *ngIf="!cargando && view && view.length > 0">
            <li class="turno-item" *ngFor="let n of view" (click)="abrirDetalle(n)" role="button" tabindex="0">
              <i class="bi bi-bell-fill item-icon" aria-hidden="true"></i>
              <div class="turno-item-info">
                <div class="turno-item-primario"><strong>{{ (n.nombre || '') + ' ' + (n.apellido || '') }}</strong></div>
                <div class="turno-item-secundario text-muted">{{ n.correo }}</div>
                <div class="turno-item-secundario"><i class="bi bi-chat-left-text inline" aria-hidden="true"></i> <span>{{ n.comentarios }}</span></div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="modal-backdrop" [hidden]="!modalAbierto"></div>
<div class="modal-contenedor" [hidden]="!modalAbierto" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3 class="modal-title">
        <i class="bi bi-bell-fill me-2"></i>
        <span>Detalle PQRS</span>
      </h3>
      <button type="button" class="modal-cerrar" (click)="cerrarDetalle($event)">✕</button>
    </div>
    <div class="modal-body" *ngIf="seleccionado as p">
      <div class="datos-grid">
        <div class="kv"><span class="k">Nombre</span><span class="v">{{ (p.nombre || '') + ' ' + (p.apellido || '') }}</span></div>
        <div class="kv"><span class="k">Correo</span><span class="v">{{ p.correo }}</span></div>
        <div class="kv"><span class="k">Teléfono</span><span class="v">{{ p.numero }}</span></div>
        <div class="kv kv-span"><span class="k">Comentarios</span><span class="v">{{ p.comentarios }}</span></div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn-turno" (click)="cerrarDetalle($event)">Cerrar</button>
    </div>
  </div>
