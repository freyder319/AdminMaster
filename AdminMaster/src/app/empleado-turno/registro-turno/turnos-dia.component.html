<section>
  <div class="container-fluid notificaciones-container">
    <div class="row">
      <div class="col-12">
        <div class="turno-card">
          <h2 class="titulo">
            <i class="bi bi-calendar-check me-2"></i>
            <span>Registro de Turnos</span>
          </h2>

  <div class="form-grid">
    <div class="campo" (click)="fechaInput.showPicker()">
      <label>Fecha</label>
      <input #fechaInput type="date" class="form-control" [(ngModel)]="fechaSeleccionada" [attr.min]="minFecha" (change)="onFechaChange()">
    </div>

    <div class="campo">
      <label>Jornada</label>
      <select class="form-select" [(ngModel)]="bloque" (ngModelChange)="onJornadaChange($event)">
        <option value="manana">Mañana</option>
        <option value="tarde">Tarde</option>
        <option value="noche">Noche</option>
      </select>
    </div>

    <div class="campo campo-hora-desde" (click)="horaDesdeInput.showPicker()">
      <label>Hora desde</label>
      <input #horaDesdeInput type="time" class="form-control" [(ngModel)]="horaDesde">
    </div>

    <div class="campo campo-hora-hasta" (click)="horaHastaInput.showPicker()">
      <label>Hora hasta</label>
      <input #horaHastaInput type="time" class="form-control" [(ngModel)]="horaHasta">
    </div>

    <div class="campo campo-notas">
      <label>Notas (opcional)</label>
      <textarea class="form-control" rows="1" [(ngModel)]="notas" placeholder="Ej: Reforzar caja, inventario, etc."></textarea>
    </div>

    <div class="campo campo-boton">
      <button type="button" class="btn btn-primary" (click)="agregarTurno()">
        Agregar Turno
      </button>
    </div>
  </div>

  <div class="lista" *ngIf="turnosDeFechaActual().length; else sinTurnosTpl">
    <h6 class="mt-3">Turnos registrados para {{ fechaSeleccionada }}</h6>
    <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center"
          *ngFor="let t of turnosDeFechaActual()">
        <div>
          <strong>
            {{ t.bloque === 'manana' ? 'Mañana' : (t.bloque === 'tarde' ? 'Tarde' : 'Noche') }}
          </strong>
          <span *ngIf="t.horaDesde || t.horaHasta">
            &nbsp;|&nbsp;
            <ng-container *ngIf="t.horaDesde">{{ t.horaDesde }}</ng-container>
            <ng-container *ngIf="t.horaDesde && t.horaHasta"> - </ng-container>
            <ng-container *ngIf="t.horaHasta">{{ t.horaHasta }}</ng-container>
          </span>
          <span *ngIf="t.notas"> - {{ t.notas }}</span>
        </div>
        <button type="button" class="btn btn-sm btn-eliminar-turno" (click)="eliminarTurno(t.id)">
          <i class="bi bi-trash me-1"></i>
          <span>Eliminar</span>
        </button>
      </li>
    </ul>
  </div>

  <ng-template #sinTurnosTpl>
    <p class="texto-vacio mt-3">No hay turnos registrados para esta fecha.</p>
  </ng-template>
        </div>
      </div>
    </div>
  </div>
</section>
