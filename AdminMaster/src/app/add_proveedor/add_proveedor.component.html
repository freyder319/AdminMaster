<main>
    <!-- Título -->
    <section>
        <div class="container text-center">
            <div class="row">
                <div class="col">
                    <h1 class="tit-proveedores">
                      <i class="bi bi-truck-front-fill me-2"></i>
                      <span>Agregar Proveedores</span>
                    </h1>
                </div>
            </div>
        </div>
    </section><br>

    <!-- Botones Activo-Inactivo e Imagen -->
    <section>
        <div class="cont-img">
            <div class=" image">
                <img class="icon-prov" src="/assets/img/icons-navbar/Proovedores.png" alt="" width="80px" height="80px">
            </div>
        </div>
        <div class="container act-inac">
            <div class="activo">
                <button
                  type="button"
                  class="btn-act"
                  [class.is-selected]="form.value?.activo === true"
                  [attr.aria-pressed]="form.value?.activo === true"
                  (click)="form.patchValue({activo: true})">Activo</button>
            </div>
            <div class="inactivo">
                <button
                  type="button"
                  class="btn-inac"
                  [class.is-selected]="form.value?.activo === false"
                  [attr.aria-pressed]="form.value?.activo === false"
                  (click)="form.patchValue({activo: false})">Inactivo</button>
            </div>
        </div><br>
    </section>

    <!-- Formulario Registro -->
    <section>
        <div class="container form">
            <div class="formulario">
                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="mb-3">
                        <label for="nombreEmpresa" class="form-label form-control2">Nombre de la Empresa</label>
                        <input #nombreEmpresaInput data-autofocus="true" type="text" formControlName="nombreEmpresa" id="nombreEmpresa" class="form-control" (keydown.enter)="onEnterFocus(nitInput, $event, form.get('nombreEmpresa')?.value)">
                    </div>
                    <div class="mb-3">
                        <label for="nit" class="form-label">NIT / Documento</label>
                        <input
                          #nitInput
                          type="text"
                          class="form-control"
                          id="nit"
                          formControlName="nit"
                          [ngClass]="{
                            'is-invalid': (form.get('nit')?.invalid && form.get('nit')?.touched) || nitDuplicado,
                            'is-valid': form.get('nit')?.valid && !nitDuplicado && form.get('nit')?.touched
                          }"
                          (keydown.enter)="form.get('nit')?.valid && !nitDuplicado ? onEnterFocus(contactoProv, $event, form.value?.nit) : null"
                        >
                        <div class="invalid-feedback" *ngIf="form.get('nit')?.invalid && form.get('nit')?.touched && !nitDuplicado">
                          Documento demasiado largo.
                        </div>
                        <div class="invalid-feedback" *ngIf="nitDuplicado">
                          El NIT / documento ya existe.
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="contactoNombre" class="form-label">Persona de Contacto</label>
                        <input
                          #contactoProv
                          type="text"
                          class="form-control"
                          id="contactoNombre"
                          formControlName="contactoNombre"
                          (keydown.enter)="onEnterFocus(telefonoProv, $event, form.value?.contactoNombre)">
                    </div>
                    <div class="mb-3">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input
                          #telefonoProv
                          type="text"
                          class="form-control"
                          id="telefono"
                          formControlName="telefono"
                          [ngClass]="{
                            'is-invalid': (form.get('telefono')?.invalid && form.get('telefono')?.touched) || telefonoDuplicado,
                            'is-valid': form.get('telefono')?.valid && !telefonoDuplicado && form.get('telefono')?.touched
                          }"
                          (keydown.enter)="form.get('telefono')?.valid && !telefonoDuplicado ? onEnterFocus(correoProv, $event, form.value?.telefono) : null"
                        >
                        <div class="invalid-feedback" *ngIf="form.get('telefono')?.hasError('pattern') && form.get('telefono')?.touched">
                          Solo números y máximo 10 dígitos.
                        </div>
                        <div class="invalid-feedback" *ngIf="telefonoDuplicado">
                          El teléfono ya existe.
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="correo" class="form-label">Correo Electronico</label>
                        <input
                          #correoProv
                          type="email"
                          class="form-control"
                          id="correo"
                          formControlName="correo"
                          [ngClass]="{
                            'is-invalid': (form.get('correo')?.invalid && form.get('correo')?.touched) || correoDuplicado,
                            'is-valid': form.get('correo')?.valid && !correoDuplicado && form.get('correo')?.touched
                          }"
                          (keydown.enter)="form.get('correo')?.valid && !correoDuplicado ? onEnterFocus(btnConfirmarProv, $event, form.value?.correo) : null"
                        >
                        <div class="invalid-feedback" *ngIf="form.get('correo')?.hasError('email') && form.get('correo')?.touched">
                          Debes ingresar un correo válido (ejemplo&#64;dominio.com).
                        </div>
                        <div class="invalid-feedback" *ngIf="correoDuplicado">
                          El correo ya existe.
                        </div>
                      </div><br>

                    <div class="confirmarfinal">
                        <button #btnConfirmarProv type="submit" class="btn confir" [disabled]="form.invalid || telefonoDuplicado || correoDuplicado || nitDuplicado">Confirmar</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

</main>