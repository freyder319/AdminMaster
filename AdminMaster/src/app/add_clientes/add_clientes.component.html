<main>
    <!-- Título -->
    <section>
        <div class="container text-center">
            <div class="row">
                <div class="col">
                    <h1 class="tit-clientes">
                      <i class="bi bi-people-fill me-2"></i>
                      <span>Agregar Clientes</span>
                    </h1>
                </div>
            </div>
        </div>
    </section><br>
    <!-- Formulario Registro -->
    <section>
        <div class="container form">
            <div class="formulario">
                <form #formCliente="ngForm" (ngSubmit)="agregarCliente(formCliente)" novalidate>
                    <!-- Estado -->
                    <section>
                        <div class="cont-img">
                        <div class="image">
                            <img class="icon-prov" src="../../assets/img/icons-navbar/Clientes.png" alt="" width="80px" height="80px">
                        </div>
                        </div>
                        <div class="container act-inac">
                        <div class="activo">
                            <button type="button" [ngClass]="{'btn-active': cliente.estado === 'activo'}" (click)="cambiarEstado('activo')" class="btn-act">Activo</button>
                        </div>
                        <div class="inactivo">
                            <button type="button" [ngClass]="{'btn-negative': cliente.estado === 'inactivo'}" (click)="cambiarEstado('inactivo')" class="btn-inac">Inactivo</button>
                        </div>
                        </div><br>
                    </section>

                    <!-- Nombre -->
                    <div class="mb-3">
                        <label for="nombre" class="form-label form-control2">Nombre del Cliente</label>
                        <input #nombreInput data-autofocus="true" type="text" [(ngModel)]="cliente.nombre" name="nombre" class="form-control" id="nombre" required (keydown.enter)="onEnterFocus(apellidoInput, $event, cliente.nombre)">
                    </div>

                    <!-- Apellido -->
                    <div class="mb-3">
                        <label for="apellido" class="form-label form-control2">Apellido del Cliente</label>
                        <input #apellidoInput type="text" [(ngModel)]="cliente.apellido" name="apellido" class="form-control" id="apellido" required (keydown.enter)="onEnterFocus(telefonoInput, $event, cliente.apellido)">
                    </div>

                    <!-- Documento -->
                    <div class="mb-3">
                        <label for="documento" class="form-label">Documento</label>
                        <input #documentoInput
                               type="text"
                               [(ngModel)]="cliente.documento"
                               name="documento"
                               id="documento"
                               class="form-control"
                               [ngClass]="{ 'is-invalid': documentoNoNumerico || documentoLongitudInvalida || documentoDuplicado }"
                               (input)="validarDocumento()"
                               (keydown.enter)="onEnterFocus(telefonoInput, $event, cliente.documento)">
                        <div class="invalid-feedback" *ngIf="documentoNoNumerico">
                            Solo se permiten números.
                        </div>
                        <div class="invalid-feedback" *ngIf="!documentoNoNumerico && documentoLongitudInvalida">
                            El documento debe tener exactamente 10 dígitos.
                        </div>
                        <div class="invalid-feedback" *ngIf="!documentoNoNumerico && !documentoLongitudInvalida && documentoDuplicado">
                            El documento ya existe.
                        </div>
                    </div>

                    <!-- Teléfono -->
                    <div class="mb-3">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input #telefonoInput type="tel" [(ngModel)]="cliente.numero" name="numero" id="telefono" class="form-control" required pattern="^[0-9]{1,10}$" [ngClass]="{ 'is-invalid': clienteExcede || clienteNoNumerico || telefonoDuplicado, 'valid-focus': !clienteExcede && !clienteNoNumerico && !telefonoDuplicado }" (input)="validarcliente()" (keydown.enter)="onEnterFocus(correoInput, $event, cliente.numero)">
                        <div class="invalid-feedback" *ngIf="clienteExcede">
                            Un teléfono tiene máximo 10 números.
                        </div>
                        <div class="invalid-feedback" *ngIf="clienteNoNumerico">
                            Solo se permiten números.
                        </div>
                    </div>

                    <!-- Correo -->
                    <div class="mb-3">
                        <label for="correo" class="form-label">Correo Electrónico</label>
                        <input #correoInput type="email" [(ngModel)]="cliente.correo" name="correo" id="correo" class="form-control" required [ngClass]="{ 'is-invalid': correoInvalido || correoDuplicado, 'valid-focus': !correoInvalido && !correoDuplicado && cliente.correo }"(input)="validarCorreo()" (keydown.enter)="onEnterFocus(btnConfirmarCliente, $event, cliente.correo)">
                        <div class="invalid-feedback" *ngIf="correoInvalido">
                            Debes ingresar un correo válido (ejemplodominio.com).
                        </div>
                        <div class="invalid-feedback" *ngIf="!correoInvalido && correoDuplicado">
                            El correo ya existe.
                        </div>
                    </div><br>

                    <!-- Botón -->
                    <div class="confirmarfinal">
                        <button #btnConfirmarCliente data-bs-dismiss="offcanvas" [disabled]="formCliente.invalid || correoInvalido || clienteExcede || clienteNoNumerico || correoDuplicado || telefonoDuplicado || documentoDuplicado || documentoNoNumerico || documentoLongitudInvalida" type="submit" class="btn confir"> Confirmar</button>
                    </div>
                    </form>

            </div>
        </div>
    </section>

</main>